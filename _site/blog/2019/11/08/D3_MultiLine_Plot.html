<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>D3 Multi-Line Plot</title>
    
    <link href="/css/common.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    
    <section class = "banner">
    <h1>D3 Multi-Line Plot</h1>
    <h2>8 November 2019</h2>
    </section>
	<html>
<head>
<style>
.Navigation{
  list-style-type: none;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

.Navigation li{
  float: right;
}

.Navigation li a{
  display: block;
  color: black;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
}

.Navigation > :first-child {
  float: left;
} 

li a:hover:not(.active) {
  background-color: #c6d1c8;
}

.active {
  background-color: #c6d1c8;
}
</style>
</head>

<div class="navbar">
  <ul class = "Navigation">
  
    <li><a href="/blog.html" ><- Blog</a></li>
  
  </ul>
</div>
</html>

    <div class = "narration">
      <p>Line graphs are one of the oldest and simplest visualizations. Draw a dot at every data point and connect them. Despite the ease of creation on paper, line graphs are tricky to implement with D3. I started learning D3 with scatter plots and bar charts. Those visualizations expect each data point to be represented by a row in a CSV file. However, to draw a line, D3 uses the SVG path element which is one continuous path derived from an array of coordinate pairs. In this case, each row of the CSV would have to contain every data point associated with a line which is unwieldy. This is where the D3 Nest function comes in handy. It takes in a vertically oriented dataset and groups it by key.</p>

<figure>
  <img src="/media/D3_MultiLine/00_Plot.png">
  <figcaption>Figure 1: A multiline chart created with D3</figcaption>
</figure>
 
<p>Let's say I want to plot the number of tropical depressions, tropical storms, and hurricanes in the Atlantic ocean each year. I only need 3 data columns. The year signifies where on the x-axis the data point will appear. The severity is the key which maps the data point to a line. The count is the y-axis complement to the year. This vertical organization pattern is more efficient for a computer to process and follows the <a href="https://vita.had.co.nz/papers/tidy-data.pdf">Tidy Data</a> principles.</p>

<p>Before I plot the line graph, I want to explain the result of invoking D3 Nest. The function returns a JSON object that has keys of type String and values of type Array. In this case there is a key for each storm severity. Each corresponding array has the entire row of data from the CSV file. D3 uses information from the array when generating the path.</p>

<p>Creating a multi line plot is remarkably similar to a single line plot once the data has been organized. Instead of providing data for a single line, I simply pass the entire nested data object to the line generator. The line generator draws a line for each key in the nest; they are separate SVG objects that can be interacted with individually.</p>

            
<figure>
  <img src="/media/D3_MultiLine/01_CSV.png">
  <figcaption>Figure 2: Common data storage format</figcaption>
</figure>
    
    
<a href="https://bl.ocks.org/jchakko/0c02c339c9550fc338e10237da635795">Interactive Version</a>
<a href="https://github.com/d3/d3-collection#nests">D3 Nest Source Code</a>
    
    </div>
	
  </body>
</html>