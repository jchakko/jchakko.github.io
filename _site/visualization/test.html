<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Turbine Locations</title>
    
    <link href="/css/common.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <html>
<head>
<style>
.Navigation{
  list-style-type: none;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

.Navigation li{
  float: right;
}

.Navigation li a{
  display: block;
  color: black;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
}

.Navigation > :first-child {
  float: left;
} 

li a:hover:not(.active) {
  background-color: #c6d1c8;
}

.active {
  background-color: #c6d1c8;
}
</style>
</head>

<div class="navbar">
  <ul class = "Navigation">
  
    <li><a href="/blog.html" ><- Blog</a></li>
  
  </ul>
</div>
</html>

    <div class = "titledate">
    <h1>Turbine Locations</h1>
    <h2>19 April 2019</h2>
    </div>
    <div class = "narration">
        <div id = "postContents"> 
  <h2>Locations of United States Wind Turbines</h2>
  <script>
    console.log("Begin Dot Density");
    let margin = {top: 20, right: 20, bottom: 30, left: 150};
    let width = 1200 - margin.left - margin.right;
    let height = 700 - margin.top - margin.bottom;
    
    let svg = d3.select("body").append("svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");
          
    svg.append("rect")
      .attr("width",width)
      .attr("height",height)
      .style("fill","green")
      .style("opacity", 0); //Background best practice
        
    Promise.all([
      d3.json("/datasets/geo/us-states.json"),
      d3.csv("/datasets/turbines/Turbine_Locations_80.csv"),
      d3.csv("/datasets/turbines/Turbine_Locations_90.csv"),
      d3.csv("/datasets/turbines/Turbine_Locations_00.csv"),
      d3.csv("/datasets/turbines/Turbine_Locations_10.csv")
    ]).then(function(data){
      let geoJsonData = data[0];
      let windData80 = data[1];
      let windData90 = data[2];
      let windData00 = data[3];
      let windData10 = data[4];
      console.log("geoJsonData:")
      console.log(geoJsonData);
      console.log("windData:")
      console.log(windData80); 

      let projection = d3.geoAlbersUsa();
      projection.fitHeight(height-100,geoJsonData);
      let pathGenerator = d3.geoPath().projection(projection);
      
      <!-- Append map of United States -->
      svg.append('g')
        .selectAll('path')
        .data(geoJsonData.features)
        .enter()
        .append('path')
          .attr('d', pathGenerator)
          .style("fill", "black")
          .style("stroke", "white");
          
      function addturbines(g, data, projection, color) {
        console.log("Add Turbines Function");
        g.selectAll("circle")
          .data(data)
          .enter()
          .append("circle")
          .attr("cx", function(d,i) {
            let coordinates = projection([d.xlong, d.ylat]);
            return coordinates[0];
          }) 
		  .attr("cy", function(d,i) {
            let coordinates = projection([d.xlong, d.ylat]);
            return coordinates[1];
          })        
		  .attr("r", "3px")
		  .attr("fill", color)
          .style("opacity", .5);          
      }
          
      let dots80 = svg.append('g');
      addturbines(dots80, windData80, projection, "blue");
          
      let dots90 = svg.append('g');
      addturbines(dots90, windData90, projection, "red");
      
      let dots00 = svg.append('g');
      addturbines(dots00, windData00, projection, "yellow");
      
      let dots10 = svg.append('g');
      addturbines(dots10, windData10, projection, "green");
          
      
    }) //End of Promise
  </script>
  </div>
</body>
</html>


    </div>
  </body>
</html>