---
title: D3 Multi-Line Plot
layout: post
category: blog
---

<figure>
  <img src="/media/D3_MultiLine/00_Plot.png">
  <figcaption>Figure 1: Aggregate score of cricketers multi-line chart</figcaption>
</figure>
 
<p>Line graphs are one of the oldest and simplest visualizations. Draw a dot at every data point and connect them. Repeat for as many lines I want on the plot. Despite the ease of creation on paper, line graphs are tricky to implement with D3. D3 uses the SVG path element which is simply one continuous line that takes an array of coordinate pairs as input. </p>

<p>Let's say I want to plot the number of runs cricket players have accumulated over time. I store this data using 3 columns: the player name, the date, and the aggregate number of runs. As a human I would gather all of the entries for one player, then make a point at every date and draw a line to show the change over time. D3 works in a similar fashion but needs a helper function to group the entries for each player.</p> 
            
<figure>
  <img src="/media/D3_MultiLine/01_CSV.png">
  <figcaption>Figure 2: Common data storage format</figcaption>
</figure>
    
<h3>This is where the D3 Nest function comes in handy. It takes in a dataset and groups it by keys, in this case the name of each player. Nest returns a JSON object that contains an array of coordinate pairs for each player. Now D3 can draw all of the lines as separate SVG elements by passing the nested data to a path generator.</h3>
    
    
<a href="https://bl.ocks.org/jchakko/0c02c339c9550fc338e10237da635795">Interactive Version</a>
<a href="https://github.com/d3/d3-collection#nests">D3 Nest Source Code</a>
    