---
title: Blazing a Trail with D3 Coordinate Projections
layout: post
category: blog
image: /media/D3_Maps/Manhattan.png
blurb: Making interactive marks on a map
---

<figure>
  <img src="/media/D3_Maps/Manhattan.png">
</figure>

<h2>The Art of Not Taking Notes</h2>

<p>I joined a Call of Cthullu campaign as if I don't spend enough time role playing already. One aspect of the game I appreciate is how its based on real locations; after a quick stint in Peru and a time skip my party ends up in New York. I wanted a visual way to keep track of our progres and decided to go with marking the locations we've visited on a D3 map.</p>

<h2>Making The Map</h2>

<p>The first step was to find an appropriate GeoJSON of Manhattan. NYC OpenData has a lot of publicly available GIS files including the<a href= "https://data.cityofnewyork.us/City-Government/Neighborhood-Tabulation-Areas-NTA-/cpf4-rkhq"> Neighborhood Tabulation Areas</a> This draws the visualization I want but also every other borough in New York. To subset the spatial file I used <a href= "https://geopandas.org/">GeoPandas</a>. The library lets me import the spatial file as a dataframe. After a quick peek at the metadata I selected only the rows that contain Manhattan's borough code and exported the selection to a JSON file.</p>

<p>Now that the map is up, I need to create markings on the map to show where the team has visited. Evidently the Cthullu handbook has the intersections for each place of interest and my patient Keeper Andriy passed it along to me. Call of Cthullu is in the 1920's so some of the street names have changed. Still, when I pass the information into Google Maps it takes it like a champ and gives me the coordinate information back. I apply the projection function to the coordinates and plot the output on top of the map of Manhattan.</p>

<h2>I jotted a few key facts</h2>
<p>The map needed some additional information to explain the relevance of the marked points. I added a mouseover effect that displays a tooltip with the name of the location, the game provided address, and quick description of what we did there. Adding points to the map gives the story a feeling of progression.</p>
     
<a href="https://github.com/jchakko/D3_Manhattan">GitHub Repo</a>